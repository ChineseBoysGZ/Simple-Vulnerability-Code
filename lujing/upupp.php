<?php
if (isset($_POST['submit'])) {
    // 漏洞：未对上传文件名进行安全检查，可能导致路径控制漏洞
    $upload_dir = 'upload\\';
    $uploaded_file = $upload_dir . urldecode($_FILES['upload_file']['name']);
    $uploaded_file = str_replace('/', '\\', $uploaded_file);

    if (move_uploaded_file($_FILES['upload_file']['tmp_name'], $uploaded_file)) {
        echo "文件上传成功! 文件路径: " . htmlspecialchars($uploaded_file);
    } else {
        echo "文件上传失败!";
    }
}
?>

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>文件上传演示</title>
</head>
<body>
    <form enctype="multipart/form-data" action="" method="POST">
        <input name="upload_file" type="file"><br>
        <input name="submit" type="submit" value="上传文件">
    </form>
</body>
</html>
