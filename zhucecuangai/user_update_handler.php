<?php
session_start();
require_once('config.php');

if (!isset($_SESSION['user_id'])) {
  header('Location: login.php');
  exit();
}

$user_id = $_SESSION['user_id'];

$address = isset($_POST['address']) ? $_POST['address'] : '';
$phone = isset($_POST['phone']) ? $_POST['phone'] : '';
$hobby = isset($_POST['hobby']) ? $_POST['hobby'] : '';
$gender = isset($_POST['gender']) ? $_POST['gender'] : '';
$alias = isset($_POST['alias']) ? $_POST['alias'] : '';

$update_query = "UPDATE users SET address = '$address', phone = '$phone', hobby = '$hobby', gender = '$gender', alias = '$alias' WHERE id = '$user_id'";
if (mysqli_query($conn, $update_query)) {
  echo "User information updated successfully.";
} else {
  echo "Error: " . $update_query . "<br>" . mysqli_error($conn);
}

mysqli_close($conn);
?>

<p><a href="user.php">Go back</a></p>
